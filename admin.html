<script>
    // Admin dashboard data containers (explicitly declared)
    let allPosts = [];
    let allUsers = [];
    let allPayments = [];

    document.addEventListener('DOMContentLoaded', function() {
        initializeAdminDashboard();
    });

    function initializeAdminDashboard() {
        // Check if user is admin
        const currentUser = localStorage.getItem('currentUser');
        if (!currentUser || JSON.parse(currentUser).email !== 'moneymaker9767@gmail.com') {
            window.location.href = 'index.html';
            return;
        }

        loadAdminData();
        setupNavigation();
        setupFilters();
    }

    function loadAdminData() {
        // Prefer the shared mockData if available; otherwise use local generators
        if (typeof window !== 'undefined' && window.mockData) {
            allPosts = window.mockData.items ? window.mockData.items.slice() : [];
            allUsers = window.mockData.users ? window.mockData.users.slice() : [];
            allPayments = window.mockData.transactions ? window.mockData.transactions.slice() : [];
        } else {
            // Generate comprehensive mock data for admin (fallback)
            allPosts = generateMockPosts();
            allUsers = generateMockUsers();
            allPayments = generateMockPayments();
        }

        loadPostsTable();
        loadUsersTable();
        loadPaymentsTable();
        initializeCharts();
    }

    // existing generateMockPosts, generateMockUsers, generateMockPayments can remain as fallbacks
</script>